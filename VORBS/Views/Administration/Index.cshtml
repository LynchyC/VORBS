@{
    ViewBag.Title = "Administration";
}

<h2>Administration</h2>
<p>This administration panel enables you administer all content in this application, including managing users, existing bookings, add/remove locations and rooms.</p>

<div id="content" ng-app="administration">

    <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active" id="bookingTab"><a href="#bookings" data-toggle="tab">Bookings</a></li>
        @if (VorbsAuthorise.IsUserAuthorised(User.Identity.Name, 2))
        {
            <li id="userTab"><a href="#users" data-toggle="tab">Users</a></li>
            <li id="locationTab"><a href="#locations" data-toggle="tab">Locations</a></li>
            <li id="roomTab"><a href="#rooms" data-toggle="tab">Rooms</a></li>
            <li id="reportsTab"><a href="#reports" data-toggle="tab">Reports</a></li>
        }
    </ul>

    <div id="my-tab-content" class="tab-content">

        <div class="tab-pane active" id="bookings">
            @Html.Partial("BookingTab")

        </div>
        @if (VorbsAuthorise.IsUserAuthorised(User.Identity.Name, 2))
        {
            <div class="tab-pane" id="users">
                @Html.Partial("UserTab")
            </div>

            <div class="tab-pane" id="locations">
                <p>Manage locations.</p>
            </div>

            <div class="tab-pane" id="rooms">
                <p>Manage rooms.</p>
            </div>

            <div class="tab-pane" id="reports">
                <p>Reports</p>
            </div>
        }

    </div>
</div>

@section scripts{
    <script src="~/Scripts/moment.js"></script>
    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Scripts/angular-resource.min.js"></script>

    <script src="~/Scripts/Administration/moduleManager.js"></script>

    <script src="~/Scripts/Administration/usersController.js"></script>
    <script src="~/Scripts/Administration/roomsController.js"></script>
    <script src="~/Scripts/Administration/bookingsController.js"></script>

    <script src="~/Scripts/Shared Functions/bookingFunctions.js"></script>

    <script src="~/Scripts/BootStrapTimePicker/bootstrap-timepicker.min.js"></script>
    <script src="~/Scripts/BootStrapDatePicker/bootstrap-datepicker.js"></script>

    <script src="~/Scripts/bloodhound.min.js"></script>
    <script src="~/Scripts/typeahead.jquery.min.js"></script>
    <script src="~/Scripts/typeahead.bundle.min.js"></script>

    <script>
        $(function () {
            $('.datepicker').datepicker({
                format: 'dd-mm-yyyy',
                autoClose: true,
                todayBtn: true,
                todayHighlight: true,
                weekStart: 1,
                daysOfWeekDisabled: [0, 6]
            });

            $('.timepicker').timepicker({
                showInputs: false,
                minuteStep: 30,
                showMeridian: false,
            });
        });

        document.getElementById('attendessControl').onkeydown = function (e) {
            var key = e.keyCode ? e.keyCode : e.which;
            if (isNaN(String.fromCharCode(key))) return false;
        };

        jQuery(document).ready(function ($) {
            $('#tabs').tab();
        });
    </script>
}